HTML5 indexedDB和Web SQL Database都是本地数据库数据存储，Web SQL Database数据库要出来的更早，然并卵。从2010年11月18日W3C宣布舍弃Web SQL database草案开始，就已经注定Web SQL Database数据库是明日黄花。

**数据库概念**

`1. 关系型数据库和非关系型数据库`

“关系型数据库”是历史悠久，已经有半个世纪，占据主流江山的数据库模型，估计诸位公司的网站多半都是使用的这种数据库模型。而“非关系型数据库”（NoSQL数据库）则要年轻很多，根据资料显示是Carlo Strozzi在1998年提出来的，20年不到，使用键值对存储数据，且结构不固定，非常类似JavaScript中的纯对象。

```
var obj = {
  key1: 'value1',
  key2: 'value2',
  key3: 'value3',
  ...
};
```

“关系型数据库”对一致性要求非常严格，例如要写入100个数据，前99个成功了，结果第100个不合法，此时事务会回滚到最初状态。这样保证事务结束和开始时候的存储数据处于一致状态。非常适合银行这种对数据一致性要求非常高的场景。但是，这种一致性保证是牺牲了一部分性能的。

但是，对于微博，QQ空间这类web2.0应用，一致性却不是显得那么重要，比方说朋友A看我的主页和朋友B看我的主页信息有不一样，没什么大不了的，有个几秒差异很OK的。虽然这类应用对一致性要求不高，但对性能要求却很高，因为读写实在太频繁了。如果使用“关系型数据库”，一致性的好处没怎么收益，反而性能问题比较明显，此时，不保证一致性但性能更优的“非关系型数据库”则更合适。同时，由于“非关系型数据库”的数据结构不固定，非常容易扩展。由于对于社交网站，需求变动那是一日三餐常有的事，添加新字段在所难免，“非关系型数据库”轻松上阵，如果使用“关系型数据库”，多半要数据大变动，要好好琢磨琢磨了。

从气质上讲，“关系型数据库”稳重持久，“非关系型数据库”迅速灵动。

在前端领域，Web SQL Database是“关系型数据库”，indexedDB是“非关系型数据库”。

`2. 了解数据库中的事务-transaction`

数据库的事务（英文为’transaction’），我们可以理解为对数据库的操作，而且专指一个序列上的操作。举个例子，银行转账，一个账号钱少了然后另一个账号钱多了，这两个操作要么都执行，要么都不执行。像这种操作就可以看成一个事务。

事务的提出主要是为了保证并发情况下保持数据一致性。关系型数据库中的事务具有下面4个基本特征：

1. 原子性(Atomicity)：事务中的所有操作作为一个整体提交或回滚。
2. 一致性(Consistemcy)：事物完成时，数据必须是一致的，以保证数据的无损。
3. 隔离性(Isolation)：对数据进行修改的多个事务是彼此隔离的。
4. 持久性(Durability)：事务完成之后，它对于系统的影响是永久的，该修改即使出现系统故障也将一直保留。

通常专业描述中会抽取这4个基本特性的首字母，统称为“ACID特性”。事务执行过程可以粗浅地理解为：开始事务，巴拉巴拉操作，如果错误，回滚（rollback），如果没问题，提交（commit），结束事务。

`3. 了解数据库中的游标-cursor`

数据库中的游标其实与之有共同之处。内存条本质上就像一把尺子，我们可以想象上面有很多刻度，然后内存大小就是由这些刻度一个一个堆砌起来的。数据库的事务为了保证数据可以回滚，显然需要有一片内存区域放置那些即将受影响是数据，这个内存区域中的虚表就是数据库的“游标”。

和现实世界的“游标卡尺”相映射就是：一个刻度表示一行数据，游标就是尺子上的一片区域，想要获得数据库一行一行的数据，我们可以遍历这个游标就好了。

`4. 数据库中的“锁”-lock`

数据库中的“锁”是保证数据库数据高并发时候数据一致性的一种机制。举个例子：现有两处火车票售票点，同时读取某发现上海到背景车票余额为5。此时两处售票点同时卖出一张车票，同时修改余额为5-1也就是4写回数据库，这样就造成了实际卖出两张火车票而数据库中的记录却只少了1张。为了避免发生这种状况，就有了锁机制，也就是执行多线程时用于强行限制资源访问。


**1. 首先打开indexedDB数据库**

indexedDB数据库打开非常简单，语法就是字面意思：

```
window.indexedDB.open(dbName, version);

```
dbName就是数据库名称，例如demo中使用的是'project'；version表示数据库的版本，根据我的理解，当我们对数据库的字段进行增加或修改时候，需要增加个版本。

通常，打开indexedDB数据库是和一些回调方法一起出现的，代码套路比较固定，基本上如果大家在实际项目中使用的话，都可以使用类似的代码：

